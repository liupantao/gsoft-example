/*页面开发记录*/

//下拉多选
layui.use(['form', 'layer'], function () {
    form = layui.form;
    var layer = parent.layer === undefined ? layui.layer : parent.layer;
    $ = layui.jquery;

    // form.on("submit(changeUser)",function(data){
    //     var index = layer.msg('提交中，请稍候',{icon: 16,time:false,shade:0.8});
    //     setTimeout(function(){
    //         layer.close(index);
    //         layer.msg("提交成功！");
    //     },2000);
    //     return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
    // })

    $("select[name=aaa]").val(["4", "5"]);
    form.render();
});

layui.use(['form', 'layedit', 'upload'], function () {
    var $ = layui.jquery,
        upload = layui.upload;

    //普通图片上传
    var uploadInst = upload.render({
        elem: '#headButton'
        , url: '/upload/'
        , before: function (obj) {
            //预读本地文件示例，不支持ie8
            obj.preview(function (index, file, result) {
                $('#headImg').attr('src', result); //图片链接（base64）
            });
        }
//            , done: function (res) {
//                //如果上传失败
//                if (res.code > 0) {
//                    return layer.msg('上传失败');
//                }
//                //上传成功
//            }
//            , error: function () {
//                //演示失败状态，并实现重传
//                var demoText = $('#demoText');
//                demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-mini demo-reload">重试</a>');
//                demoText.find('.demo-reload').on('click', function () {
//                    uploadInst.upload();
//                });
//            }
    });
});


//删除行
//     del: function () {
//         var checkedRows = table.checkStatus('idTest').data || [];
//         if (checkedRows.length <= 0) {
//             layer.msg("请勾选要删除的数据！");
//             return;
//         }
//         layer.confirm('真的删除行么', function (index) {
//             //向服务端发送删除指令
//             layer.msg("已删除");
//             //重新加载
//             table.reload("idTest");
//             layer.close(index);
//         });
//     }



var temp;
// onmousedown="show_element(event)"
//    function show_element(e) {
//        if (!e) {
//            var e = window.event;
//        }
//        //获取事件点击元素
//        var targ = e.target;
//        //获取元素名称
//        var tname = targ.tagName;
//        alert(tname.innerHTML);
//    }

window.onload = function(){
    var obj_lis = document.getElementById("test").setAttribute("li");
    for(i=0;i<obj_lis.length;i++){
        obj_lis[i].onclick = function(){
            alert(this.innerHTML);
        }
    }
}

// function getId(menus,title) {
//    for(var item in menus){
//       if(menus[item].text == title){
//            alert(menus[item].id);
//            return menus[item].id;
//        }
//        var id = getId(menus[item].children,title);
//        if(id){
//            return id;
//        }
//    }
//    return "";
//}


//点击表格加颜色
$(document).on('click','.layui-table tbody tr',function(){
    $(this).addClass('active').siblings().removeClass('active');
    var flag = $(this).find('div.layui-unselect').hasClass('layui-form-checked');
    if(flag){
        $(this).find('div.layui-unselect').removeClass('layui-form-checked');
    }else{
        $(this).find('div.layui-unselect').addClass('layui-form-checked');
        $(this).addClass('active').siblings().find('div.layui-unselect').removeClass('layui-form-checked');
    }
});

//双击先中 变色
$(document).on("dblclick",".layui-table-view tbody tr",function(){
    var index=$(this).data("index");
    var $checktr=$(".layui-table-view tbody tr[data-index='"+index+"']");
    $checktr.toggleClass("active");
});